<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GTM Variable Monitor</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="popup-root">
    <!-- Header -->
    <header class="header">
      <h1 class="header__title">GTM Variable Monitor</h1>
      <div class="header__controls">
        <label class="toggle" title="Enable / disable extension">
          <input type="checkbox" id="toggle-enabled" checked>
          <span class="toggle__slider"></span>
        </label>
        <button id="btn-detach" class="btn btn--icon" title="Open in separate window">&#x2197;</button>
      </div>
    </header>

    <!-- Status bar -->
    <div id="status-bar" class="status-bar">
      <span id="status-text">Ready</span>
    </div>

    <!-- Container info (shown after detection) -->
    <div id="container-info" class="container-info hidden"></div>

    <!-- Export selector -->
    <div id="export-selector" class="export-selector hidden">
      <label class="export-selector__label" for="select-export">Export data:</label>
      <select id="select-export" class="export-selector__select"></select>
      <button id="btn-clear-history" class="btn btn--text" title="Clear export history">Clear</button>
    </div>

    <!-- Action bar -->
    <div class="action-bar">
      <button id="btn-run" class="btn btn--primary" disabled>Run Analysis</button>
    </div>

    <!-- Results area -->
    <div id="results" class="results hidden">

      <!-- Summary cards -->
      <div id="summary-cards" class="summary-cards"></div>

      <!-- Results actions (shown when unused variables found) -->
      <div id="results-actions" class="results-actions hidden">
        <button id="btn-select-unused" class="btn btn--secondary">Select Unused Variables in GTM</button>
        <div id="gtm-warning" class="gtm-warning hidden">Navigate to <a href="https://tagmanager.google.com" target="_blank">tagmanager.google.com</a> first</div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab tab--active" data-tab="unused-vars">Unused Variables</button>
        <button class="tab" data-tab="duplicates">Duplicates</button>
        <button class="tab" data-tab="unused-tpl">Unused Templates</button>
      </div>

      <!-- Tab panels -->
      <div id="panel-unused-vars" class="panel panel--active"></div>
      <div id="panel-duplicates" class="panel"></div>
      <div id="panel-unused-tpl" class="panel"></div>
    </div>

    <!-- Disabled overlay -->
    <div id="disabled-overlay" class="disabled-overlay hidden">
      <p>Extension is disabled.</p>
      <p>Toggle the switch above to enable.</p>
    </div>
  </div>

  <script src="analyzer.js"></script>
  <script src="popup.js"></script>
</body>
</html>
